# 普通文件和CSV文件读写

## 一. 普通文件读写

- 具体步骤
  - 打开文件：<变量名> = open(<文件名>,<打开模式>)
  - 文件操作：读或写
  - 关闭文件：<变量名> = close()

``` python
a=open('../file.txt','w',encoding='utf-8') # 打开文件
a.write("test") # 文件操作
a.close() # 关闭文件
```

- 或
    - 上下文管理器*with*语句

``` python
with open = ('../file.txt','w',encoding='utf=8') as file:
    pass # 文件具体操作
```

- 文件打开模式

    | 文件打开模式 |                         描述                          |
    | :----------: | :---------------------------------------------------: |
    |     'r'      |  只读模式，默认，若文件不存在，返回FileNotFoundError  |
    |     'w'      |      覆盖写，若不存在则创建文件，存在则覆盖原文       |
    |     'x'      | 创建写，若不存在则创建文件，存在则返回FileExistsError |
    |     'a'      | 追加写，若不存在则创建文件，存在则在文件内容后追加写  |
    |     'b'      |                      二进制模式                       |
    |     't'      |                   文本模式，默认值                    |
    |     '+'      |  与r/w/x/a/一同使用，在原功能基础上增加同时读写功能   |

- 文件读取操作函数

    |         函数名         |                       描述                       |
    | :--------------------: | :----------------------------------------------: |
    |   <f>.read(size=-1)    |    读入全部内容并返回，若有参数读入前size长度    |
    | <f>.readline(size=-1)  | 读入一行内容并返回，若有参数，读入该行前size长度 |
    | <f>.readlines(hint=-1) | 读入所有行并返回一个列表，若有参数，读入前hint行 |

- 文件写入操作函数

    |        函数名         |                                               描述                                                |
    | :-------------------: | :-----------------------------------------------------------------------------------------------: |
    |     <f>.write(s)      |                                      写入一个字符串或字节流                                       |
    | <f>.writelines(lines) |                            将一个元素全为字符串的列表拼接后，写入文件                             |
    |   <f>.seek(offset)    | 改变当前文件操作指针的位置，offset含义如下:<br>0 - 文件开头；<br>1 - 当前位置；<br>2 - 文件结尾。 |

## 二. CSV文件

    Common Separateed Values 国际通用一二维数据存储格式，扩展名为.csv

- 文件格式

    ```py
    城市,环比,同比,定基
    北京,101.5,120.7,121.4
    上海,101.2,127.3,127.8
    广州,101.3,119.4,120.0
    深圳,102.0,140.9,145.5
    沈阳,100.1,101.4,101.6
    ```
    
- 手工处理CSV文件
- 使用CSV标准库

    ```python
    import csv
    ```

    ## List形式

    - 设置文件句柄

        reader=csv.reader(file)

        writer=csv.writer(file)

        |      函数名      |                      描述                      |
        | :--------------: | :--------------------------------------------: |
        | csv.writer(file) | 设置读取文件句柄，file为文件句柄，返回文件对象 |
        | csv.reader(file) | 设置写入文件句柄，file问文件句柄，返回数据对象 |

    - 读

        ```python
        for row in reader:
            print(row)
        ```

    - 写

        |         函数名         |             描述             |
        | :--------------------: | :--------------------------: |
        |  reader.writerow(row)  | 写入一行数据，row为一维列表  |
        | reader.writerows(data) | 写入多行数据，data为二维列表 |

  ## dict形式

    - 设置文件句柄

        csv.DictWriter(file,fieldnames)

        csv.DictReader(file)

        |             函数名              | 描述                                               |
        | :-----------------------------: | :------------------------------------------------- |
        | csv.DictWriter(file,fieldnames) | file为文件句柄，fieldnames为数据索引，返回文件对象 |
        |      csv.DictReader(file)       | file为文件句柄，返回数据对象                       |

    - 读

        |       函数名        |     描述     |
        | :-----------------: | :----------: |
        | reader.fieldnames() | 返回索引列表 |

        ```python
        for row in reader:
            print(row)
        ```

    - 写

        |         函数名         |           描述           |
        | :--------------------: | :----------------------: |
        |  writer.writeheader()  |  写入索引，即fieldnames  |
        | writer.writerows(data) | 写入数据，data为二维List |